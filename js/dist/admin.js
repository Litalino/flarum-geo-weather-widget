(()=>{var t={n:e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};(()=>{"use strict";t.r(e);const n=flarum.core.compat["admin/app"];var r=t.n(n);const i=flarum.core.compat["extensions/afrux-forum-widgets-core/common/extend/Widgets"];var a=t.n(i);function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}const l=flarum.core.compat["extensions/afrux-forum-widgets-core/common/components/Widget"];var g=t.n(l);const s=flarum.core.compat["forum/app"];var d=t.n(s);const h=flarum.core.compat["common/extend"];function p(){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){var e=t.coords.latitude,n=t.coords.longitude,r=d().forum.attribute("wheaterApiKey"),i="https://api.openweathermap.org/data/2.5/weather?lat="+e+"&lon="+n+"&lang="+(d().forum.attribute("lang")||"en")+"&appid="+r+"&exclude=hourly,daily",a={"01d":'<img src="https://openweathermap.org/img/wn/01d@2x.png" height="42" width="42" style="vertical-align: middle">',"01n":'<img src="https://openweathermap.org/img/wn/01n@2x.png" height="42" width="42" style="vertical-align: middle">',"02d":'<img src="https://openweathermap.org/img/wn/02d@2x.png" height="42" width="42" style="vertical-align: middle">',"02n":'<img src="https://openweathermap.org/img/wn/02n@2x.png" height="42" width="42" style="vertical-align: middle">',"03d":'<img src="https://openweathermap.org/img/wn/03d@2x.png" height="42" width="42" style="vertical-align: middle">',"03n":'<img src="https://openweathermap.org/img/wn/03n@2x.png" height="42" width="42" style="vertical-align: middle">',"04d":'<img src="https://openweathermap.org/img/wn/04d@2x.png" height="42" width="42" style="vertical-align: middle">',"04n":'<img src="https://openweathermap.org/img/wn/04n@2x.png" height="42" width="42" style="vertical-align: middle">',"09d":'<img src="https://openweathermap.org/img/wn/09d@2x.png" height="42" width="42" style="vertical-align: middle">',"09n":'<img src="https://openweathermap.org/img/wn/09n@2x.png" height="42" width="42" style="vertical-align: middle">',"10d":'<img src="https://openweathermap.org/img/wn/10d@2x.png" height="42" width="42" style="vertical-align: middle">',"10n":'<img src="https://openweathermap.org/img/wn/10n@2x.png" height="42" width="42" style="vertical-align: middle">',"11d":'<img src="https://openweathermap.org/img/wn/11d@2x.png" height="42" width="42" style="vertical-align: middle">',"11n":'<img src="https://openweathermap.org/img/wn/11n@2x.png" height="42" width="42" style="vertical-align: middle">',"13d":'<img src="https://openweathermap.org/img/wn/13d@2x.png" height="42" width="42" style="vertical-align: middle">',"13n":'<img src="https://openweathermap.org/img/wn/13n@2x.png" height="42" width="42" style="vertical-align: middle">',"50d":'<img src="https://openweathermap.org/img/wn/50d@2x.png" height="42" width="42" style="vertical-align: middle">',"50n":'<img src="https://openweathermap.org/img/wn/50n@2x.png" height="42" width="42" style="vertical-align: middle">'};$.get(i,(function(t){var e=Math.floor(t.main.temp-273),n=t.weather[0].description,r=a[t.weather[0].icon],i=t.wind.speed,o=t.clouds.all,m=t.main.humidity;$("#temp-main").html(e+"Â°"),$("#condition").html((function(){return" <em>"+r+n+" </em> "})),$("#wind").html((function(){return"  <em>"+d().translator.trans("geo-weather.forum.wind")+": "+i+" </em> "})),$("#clouds").html((function(){return"  <em>"+d().translator.trans("geo-weather.forum.clouds")+": "+o+" % </em> "})),$("#rain").html((function(){return"  <em>"+d().translator.trans("geo-weather.forum.rain")+":  </em> "})),$("#humidity").html((function(){return"  <em>"+d().translator.trans("geo-weather.forum.humidity")+": "+m+" % </em> "}))}))})):alert(d().translator.trans("geo-weather.forum.not-supported"))}flarum.core.compat["forum/components/IndexPage"];const c=flarum.core.compat["common/components/Page"];var w=t.n(c);const u=flarum.core.compat["common/utils/extractText"];var f=t.n(u);const y=flarum.core.compat["common/utils/ItemList"];var v=t.n(y),x=function(t){var e,n;function r(){return t.apply(this,arguments)||this}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,o(e,n);var i=r.prototype;return i.className=function(){return"Litalino-GeoWeatherWidget"},i.icon=function(){return"fas fa-cloud-sun"},i.title=function(){return f()(d().translator.trans("geo-weather.forum.widget.title"))},i.content=function(){(0,h.extend)(w().prototype,["oncreate","onupdate"],p);var t=this.items().toArray();if(0!==t.length)return m("div",{class:"item-GeoWeatherWg"},t)},i.items=function(){var t=new(v()),e=d().forum.attribute("baseUrl")+"/assets/extensions/litalino-geo-weather-widget/4seasons.gif";return t.add("GeoWeatherWg",m("div",{className:"weather",style:"background-image: url("+e+")"},[m("div",{id:"temp-main"},d().translator.trans("geo-weather.forum.temp")),m("div",{id:"time-geo-weather"}),m("div",{id:"condition"},d().translator.trans("geo-weather.forum.unknown")),m("ul",{className:"col-w-c"},m("li",{id:"wind"},d().translator.trans("geo-weather.forum.wind")),m("li",{id:"clouds"},d().translator.trans("geo-weather.forum.clouds")),m("li",{id:"humidity"},d().translator.trans("geo-weather.forum.humidity")))]),10),t},r}(g());r().initializers.add("litalino/geo-weather-widget",(function(){var t;t=r(),(new(a())).add({key:"geoWeatherWidget",component:x,isDisabled:!1,isUnique:!0,placement:"end",position:1}).extend(t,"litalino-geo-weather-widget"),r().extensionData.for("litalino-geo-weather-widget").registerSetting({setting:"litalino-geo-weather-widget.lang",name:"lang",type:"text",label:r().translator.trans("geo-weather.admin.lang"),help:r().translator.trans("geo-weather.admin.lang-help")}).registerSetting({setting:"litalino-geo-weather-widget.wheaterApiKey",name:"wheaterApiKey",type:"text",label:r().translator.trans("geo-weather.admin.apiKey"),help:r().translator.trans("geo-weather.admin.apiKey-help")})}))})(),module.exports=e})();
//# sourceMappingURL=admin.js.map