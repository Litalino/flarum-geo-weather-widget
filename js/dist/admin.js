(()=>{var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};(()=>{"use strict";e.r(t);const n=flarum.core.compat["admin/app"];var r=e.n(n);const a=flarum.core.compat["extensions/afrux-forum-widgets-core/common/extend/Widgets"];var i=e.n(a);function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}const l=flarum.core.compat["extensions/afrux-forum-widgets-core/common/components/Widget"];var g=e.n(l);const d=flarum.core.compat["forum/app"];var s=e.n(d);const p=flarum.core.compat["common/extend"],h=flarum.core.compat["forum/components/IndexPage"];var c=e.n(h);function w(){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){var t=e.coords.latitude,n=e.coords.longitude,r=s().forum.attribute("wheaterApiKey"),a="https://api.openweathermap.org/data/2.5/weather?lat="+t+"&lon="+n+"&lang="+(s().forum.attribute("lang")||"en")+"&appid="+r+"&exclude=hourly,daily",i={"01d":'<img src="https://openweathermap.org/img/wn/01d@2x.png" height="42" width="42" style="vertical-align: middle">',"01n":'<img src="https://openweathermap.org/img/wn/01n@2x.png" height="42" width="42" style="vertical-align: middle">',"02d":'<img src="https://openweathermap.org/img/wn/02d@2x.png" height="42" width="42" style="vertical-align: middle">',"02n":'<img src="https://openweathermap.org/img/wn/02n@2x.png" height="42" width="42" style="vertical-align: middle">',"03d":'<img src="https://openweathermap.org/img/wn/03d@2x.png" height="42" width="42" style="vertical-align: middle">',"03n":'<img src="https://openweathermap.org/img/wn/03n@2x.png" height="42" width="42" style="vertical-align: middle">',"04d":'<img src="https://openweathermap.org/img/wn/04d@2x.png" height="42" width="42" style="vertical-align: middle">',"04n":'<img src="https://openweathermap.org/img/wn/04n@2x.png" height="42" width="42" style="vertical-align: middle">',"09d":'<img src="https://openweathermap.org/img/wn/09d@2x.png" height="42" width="42" style="vertical-align: middle">',"09n":'<img src="https://openweathermap.org/img/wn/09n@2x.png" height="42" width="42" style="vertical-align: middle">',"10d":'<img src="https://openweathermap.org/img/wn/10d@2x.png" height="42" width="42" style="vertical-align: middle">',"10n":'<img src="https://openweathermap.org/img/wn/10n@2x.png" height="42" width="42" style="vertical-align: middle">',"11d":'<img src="https://openweathermap.org/img/wn/11d@2x.png" height="42" width="42" style="vertical-align: middle">',"11n":'<img src="https://openweathermap.org/img/wn/11n@2x.png" height="42" width="42" style="vertical-align: middle">',"13d":'<img src="https://openweathermap.org/img/wn/13d@2x.png" height="42" width="42" style="vertical-align: middle">',"13n":'<img src="https://openweathermap.org/img/wn/13n@2x.png" height="42" width="42" style="vertical-align: middle">',"50d":'<img src="https://openweathermap.org/img/wn/50d@2x.png" height="42" width="42" style="vertical-align: middle">',"50n":'<img src="https://openweathermap.org/img/wn/50n@2x.png" height="42" width="42" style="vertical-align: middle">'};$.get(a,(function(e){var t=Math.floor(e.main.temp-273),n=e.weather[0].description,r=i[e.weather[0].icon],a=e.wind.speed,o=e.clouds.all;$("#temp-main").html(t+"Â°"),$("#condition").html((function(){return" <em>"+r+n+" </em> "})),$("#wind").html((function(){return"  <em>"+s().translator.trans("geo-weather.forum.wind")+": "+a+" </em> "})),$("#clouds").html((function(){return"  <em>"+s().translator.trans("geo-weather.forum.clouds")+": "+o+" % </em> "})),$("#rain").html((function(){return"  <em>"+s().translator.trans("geo-weather.forum.rain")+":  </em> "}))}))})):alert(s().translator.trans("geo-weather.forum.not-supported"))}const u=flarum.core.compat["common/components/Page"];var f=e.n(u);const y=flarum.core.compat["common/utils/extractText"];var v=e.n(y),x=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var a=r.prototype;return a.className=function(){return"Litalino-GeoWeatherWidget"},a.icon=function(){return"fas fa-chart-pie"},a.title=function(){return v()(s().translator.trans("geo-weather.forum.widget.title"))},a.content=function(){(0,p.extend)(f().prototype,["oncreate","onupdate"],w),(0,p.extend)(c().prototype,"oncreate",(function(){this.timeInterval=setInterval((function(){var e=new Date,t=e.getHours(),n=e.getMinutes(),r=e.getSeconds();t<10&&(t="0"+t),n<10&&(n="0"+n),r<10&&(r="0"+r),document.getElementById("time").innerHTML=t+":"+n+":"+r}),500)})),(0,p.extend)(c().prototype,"onremove",(function(){clearInterval(this.timeInterval)})),(0,p.extend)(c().prototype,"oncreate",(function(e){var t=s().forum.attribute("baseUrl")+"/assets/extensions/justoverclock-geo-weather/4seasons.gif";e.add("GeoWeatherWg",m("div",{className:"weather",style:"background-image: url("+t+")"},[m("div",{id:"temp-main"},s().translator.trans("geo-weather.forum.temp")),m("div",{id:"time"}),m("div",{id:"condition"},s().translator.trans("geo-weather.forum.unknown")),m("ul",{className:"col-w-c"},m("li",{id:"wind"},s().translator.trans("geo-weather.forum.wind")),m("li",{id:"clouds"},s().translator.trans("geo-weather.forum.clouds")),m("li",{id:"humidity"},s().translator.trans("geo-weather.forum.humidity")))]),10)}))},r}(g());r().initializers.add("litalino/geo-weather-widget",(function(){var e;e=r(),(new(i())).add({key:"geoWeatherWidget",component:x,isDisabled:!1,isUnique:!0,placement:"end",position:1}).extend(e,"litalino-geo-weather-widget"),r().extensionData.for("litalino-geo-weather-widget").registerSetting({setting:"litalino-geo-weather-widget.lang",name:"lang",type:"text",label:r().translator.trans("geo-weather.admin.lang"),help:r().translator.trans("geo-weather.admin.lang-help")}).registerSetting({setting:"litalino-geo-weather-widget.wheaterApiKey",name:"wheaterApiKey",type:"text",label:r().translator.trans("geo-weather.admin.apiKey"),help:r().translator.trans("geo-weather.admin.apiKey-help")})}))})(),module.exports=t})();
//# sourceMappingURL=admin.js.map