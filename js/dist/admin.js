(()=>{var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};(()=>{"use strict";e.r(t);const n=flarum.core.compat["admin/app"];var r=e.n(n);const i=flarum.core.compat["extensions/afrux-forum-widgets-core/common/extend/Widgets"];var a=e.n(i);function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}const l=flarum.core.compat["extensions/afrux-forum-widgets-core/common/components/Widget"];var g=e.n(l);const s=flarum.core.compat["forum/app"];var d=e.n(s);const h=flarum.core.compat["common/extend"],p=flarum.core.compat["forum/components/IndexPage"];var c=e.n(p);const u=flarum.core.compat["common/components/Page"];var w=e.n(u);const f=flarum.core.compat["common/utils/extractText"];var y=e.n(f);const v=flarum.core.compat["common/utils/ItemList"];var x=e.n(v),b=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,o(t,n);var i=r.prototype;return i.className=function(){return"Litalino-GeoWeatherWidget"},i.icon=function(){return"fas fa-chart-pie"},i.title=function(){return y()(d().translator.trans("geo-weather.forum.widget.title"))},i.content=function(){var e=this.items().toArray();if(0!==e.length)return m("div",{class:"item-GeoWeatherWg"},e)},i.items=function(){var e=new(x()),t=d().forum.attribute("baseUrl")+"/assets/extensions/litalino-geo-weather-widget/4seasons.gif";return e.add("GeoWeatherWg",m("div",{className:"weather",style:"background-image: url("+t+")"},[m("div",{id:"temp-main"},d().translator.trans("geo-weather.forum.temp")),m("div",{id:"time-geo-weather"}),m("div",{id:"condition"},d().translator.trans("geo-weather.forum.unknown")),m("ul",{className:"col-w-c"},m("li",{id:"wind"},d().translator.trans("geo-weather.forum.wind")),m("li",{id:"clouds"},d().translator.trans("geo-weather.forum.clouds")),m("li",{id:"humidity"},d().translator.trans("geo-weather.forum.humidity")))]),10),e},r}(g());(0,h.extend)(w().prototype,["oncreate","onupdate"],(function(){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){var t=e.coords.latitude,n=e.coords.longitude,r=d().forum.attribute("wheaterApiKey"),i="https://api.openweathermap.org/data/2.5/weather?lat="+t+"&lon="+n+"&lang="+(d().forum.attribute("lang")||"en")+"&appid="+r+"&exclude=hourly,daily",a={"01d":'<img src="https://openweathermap.org/img/wn/01d@2x.png" height="42" width="42" style="vertical-align: middle">',"01n":'<img src="https://openweathermap.org/img/wn/01n@2x.png" height="42" width="42" style="vertical-align: middle">',"02d":'<img src="https://openweathermap.org/img/wn/02d@2x.png" height="42" width="42" style="vertical-align: middle">',"02n":'<img src="https://openweathermap.org/img/wn/02n@2x.png" height="42" width="42" style="vertical-align: middle">',"03d":'<img src="https://openweathermap.org/img/wn/03d@2x.png" height="42" width="42" style="vertical-align: middle">',"03n":'<img src="https://openweathermap.org/img/wn/03n@2x.png" height="42" width="42" style="vertical-align: middle">',"04d":'<img src="https://openweathermap.org/img/wn/04d@2x.png" height="42" width="42" style="vertical-align: middle">',"04n":'<img src="https://openweathermap.org/img/wn/04n@2x.png" height="42" width="42" style="vertical-align: middle">',"09d":'<img src="https://openweathermap.org/img/wn/09d@2x.png" height="42" width="42" style="vertical-align: middle">',"09n":'<img src="https://openweathermap.org/img/wn/09n@2x.png" height="42" width="42" style="vertical-align: middle">',"10d":'<img src="https://openweathermap.org/img/wn/10d@2x.png" height="42" width="42" style="vertical-align: middle">',"10n":'<img src="https://openweathermap.org/img/wn/10n@2x.png" height="42" width="42" style="vertical-align: middle">',"11d":'<img src="https://openweathermap.org/img/wn/11d@2x.png" height="42" width="42" style="vertical-align: middle">',"11n":'<img src="https://openweathermap.org/img/wn/11n@2x.png" height="42" width="42" style="vertical-align: middle">',"13d":'<img src="https://openweathermap.org/img/wn/13d@2x.png" height="42" width="42" style="vertical-align: middle">',"13n":'<img src="https://openweathermap.org/img/wn/13n@2x.png" height="42" width="42" style="vertical-align: middle">',"50d":'<img src="https://openweathermap.org/img/wn/50d@2x.png" height="42" width="42" style="vertical-align: middle">',"50n":'<img src="https://openweathermap.org/img/wn/50n@2x.png" height="42" width="42" style="vertical-align: middle">'};$.get(i,(function(e){var t=Math.floor(e.main.temp-273),n=e.weather[0].description,r=a[e.weather[0].icon],i=e.wind.speed,o=e.clouds.all,m=e.main.humidity;$("#temp-main").html(t+"Â°"),$("#condition").html((function(){return" <em>"+r+n+" </em> "})),$("#wind").html((function(){return"  <em>"+d().translator.trans("geo-weather.forum.wind")+": "+i+" </em> "})),$("#clouds").html((function(){return"  <em>"+d().translator.trans("geo-weather.forum.clouds")+": "+o+" % </em> "})),$("#rain").html((function(){return"  <em>"+d().translator.trans("geo-weather.forum.rain")+":  </em> "})),$("#humidity").html((function(){return"  <em>"+d().translator.trans("geo-weather.forum.humidity")+": "+m+" % </em> "}))}))})):alert(d().translator.trans("geo-weather.forum.not-supported"))})),(0,h.extend)(c().prototype,"oncreate",(function(){this.timeInterval=setInterval((function(){var e=new Date,t=e.getHours(),n=e.getMinutes(),r=e.getSeconds();t<10&&(t="0"+t),n<10&&(n="0"+n),r<10&&(r="0"+r),document.getElementById("time-geo-weather").innerHTML=t+":"+n+":"+r}),500)})),(0,h.extend)(c().prototype,"onremove",(function(){clearInterval(this.timeInterval)})),r().initializers.add("litalino/geo-weather-widget",(function(){var e;e=r(),(new(a())).add({key:"geoWeatherWidget",component:b,isDisabled:!1,isUnique:!0,placement:"end",position:1}).extend(e,"litalino-geo-weather-widget"),r().extensionData.for("litalino-geo-weather-widget").registerSetting({setting:"litalino-geo-weather-widget.lang",name:"lang",type:"text",label:r().translator.trans("geo-weather.admin.lang"),help:r().translator.trans("geo-weather.admin.lang-help")}).registerSetting({setting:"litalino-geo-weather-widget.wheaterApiKey",name:"wheaterApiKey",type:"text",label:r().translator.trans("geo-weather.admin.apiKey"),help:r().translator.trans("geo-weather.admin.apiKey-help")})}))})(),module.exports=t})();
//# sourceMappingURL=admin.js.map