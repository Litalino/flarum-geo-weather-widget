(()=>{var t={n:e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};(()=>{"use strict";t.r(e);const n=flarum.core.compat["forum/app"];var r=t.n(n);const i=flarum.core.compat["extensions/afrux-forum-widgets-core/common/extend/Widgets"];var o=t.n(i);function a(t,e){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},a(t,e)}const l=flarum.core.compat["extensions/afrux-forum-widgets-core/common/components/Widget"];var g=t.n(l);const d=flarum.core.compat["common/extend"],s=flarum.core.compat["forum/components/IndexPage"];var p=t.n(s);function c(){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){var e=t.coords.latitude,n=t.coords.longitude,i=r().forum.attribute("wheaterApiKey"),o="https://api.openweathermap.org/data/2.5/weather?lat="+e+"&lon="+n+"&lang="+(r().forum.attribute("lang")||"en")+"&appid="+i+"&exclude=hourly,daily",a={"01d":'<img src="https://openweathermap.org/img/wn/01d@2x.png" height="42" width="42" style="vertical-align: middle">',"01n":'<img src="https://openweathermap.org/img/wn/01n@2x.png" height="42" width="42" style="vertical-align: middle">',"02d":'<img src="https://openweathermap.org/img/wn/02d@2x.png" height="42" width="42" style="vertical-align: middle">',"02n":'<img src="https://openweathermap.org/img/wn/02n@2x.png" height="42" width="42" style="vertical-align: middle">',"03d":'<img src="https://openweathermap.org/img/wn/03d@2x.png" height="42" width="42" style="vertical-align: middle">',"03n":'<img src="https://openweathermap.org/img/wn/03n@2x.png" height="42" width="42" style="vertical-align: middle">',"04d":'<img src="https://openweathermap.org/img/wn/04d@2x.png" height="42" width="42" style="vertical-align: middle">',"04n":'<img src="https://openweathermap.org/img/wn/04n@2x.png" height="42" width="42" style="vertical-align: middle">',"09d":'<img src="https://openweathermap.org/img/wn/09d@2x.png" height="42" width="42" style="vertical-align: middle">',"09n":'<img src="https://openweathermap.org/img/wn/09n@2x.png" height="42" width="42" style="vertical-align: middle">',"10d":'<img src="https://openweathermap.org/img/wn/10d@2x.png" height="42" width="42" style="vertical-align: middle">',"10n":'<img src="https://openweathermap.org/img/wn/10n@2x.png" height="42" width="42" style="vertical-align: middle">',"11d":'<img src="https://openweathermap.org/img/wn/11d@2x.png" height="42" width="42" style="vertical-align: middle">',"11n":'<img src="https://openweathermap.org/img/wn/11n@2x.png" height="42" width="42" style="vertical-align: middle">',"13d":'<img src="https://openweathermap.org/img/wn/13d@2x.png" height="42" width="42" style="vertical-align: middle">',"13n":'<img src="https://openweathermap.org/img/wn/13n@2x.png" height="42" width="42" style="vertical-align: middle">',"50d":'<img src="https://openweathermap.org/img/wn/50d@2x.png" height="42" width="42" style="vertical-align: middle">',"50n":'<img src="https://openweathermap.org/img/wn/50n@2x.png" height="42" width="42" style="vertical-align: middle">'};$.get(o,(function(t){var e=Math.floor(t.main.temp-273),n=t.weather[0].description,i=a[t.weather[0].icon],o=t.wind.speed,m=t.clouds.all;$("#temp-main").html(e+"Â°"),$("#condition").html((function(){return" <em>"+i+n+" </em> "})),$("#wind").html((function(){return"  <em>"+r().translator.trans("geo-weather.forum.wind")+": "+o+" </em> "})),$("#clouds").html((function(){return"  <em>"+r().translator.trans("geo-weather.forum.clouds")+": "+m+" % </em> "})),$("#rain").html((function(){return"  <em>"+r().translator.trans("geo-weather.forum.rain")+":  </em> "}))}))})):alert(r().translator.trans("geo-weather.forum.not-supported"))}const h=flarum.core.compat["common/components/Page"];var u=t.n(h);const w=flarum.core.compat["common/utils/extractText"];var f=t.n(w),v=function(t){var e,n;function i(){return t.apply(this,arguments)||this}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,a(e,n);var o=i.prototype;return o.className=function(){return"Litalino-GeoWeatherWidget"},o.icon=function(){return"fas fa-chart-pie"},o.title=function(){return f()(r().translator.trans("geo-weather.forum.widget.title"))},o.content=function(){(0,d.extend)(u().prototype,["oncreate","onupdate"],c),(0,d.extend)(p().prototype,"oncreate",(function(){this.timeInterval=setInterval((function(){var t=new Date,e=t.getHours(),n=t.getMinutes(),r=t.getSeconds();e<10&&(e="0"+e),n<10&&(n="0"+n),r<10&&(r="0"+r),document.getElementById("time").innerHTML=e+":"+n+":"+r}),500)})),(0,d.extend)(p().prototype,"onremove",(function(){clearInterval(this.timeInterval)})),(0,d.extend)(p().prototype,"oncreate",(function(t){var e=r().forum.attribute("baseUrl")+"/assets/extensions/justoverclock-geo-weather/4seasons.gif";t.add("GeoWeatherWg",m("div",{className:"weather",style:"background-image: url("+e+")"},[m("div",{id:"temp-main"},r().translator.trans("geo-weather.forum.temp")),m("div",{id:"time"}),m("div",{id:"condition"},r().translator.trans("geo-weather.forum.unknown")),m("ul",{className:"col-w-c"},m("li",{id:"wind"},r().translator.trans("geo-weather.forum.wind")),m("li",{id:"clouds"},r().translator.trans("geo-weather.forum.clouds")),m("li",{id:"humidity"},r().translator.trans("geo-weather.forum.humidity")))]),10)}))},i}(g());r().initializers.add("litalino/geo-weather-widget",(function(){var t;t=r(),(new(o())).add({key:"geoWeatherWidget",component:v,isDisabled:!1,isUnique:!0,placement:"end",position:1}).extend(t,"litalino-geo-weather-widget")}))})(),module.exports=e})();
//# sourceMappingURL=forum.js.map